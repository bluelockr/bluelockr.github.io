+++
title = "Virtualbox ê°€ìƒë¨¸ì‹  ì•ˆì˜ Linuxì— NAT Networkì¸ ìƒíƒœì—ì„œ SSH ì ‘ì†(ì¼ë°˜/RSA)í•˜ëŠ” ë²•"
summary = "SSH Connection(Common/RSA) to Virtualbox NAT Network"
date = 2023-09-21T00:00:00+00:00
cover = ""
slug = "ssh_to_virtualbox_nat_network_common_rsa"
tags = ['Windows', 'Linux', 'Virtualbox']
draft = false
+++
## â­SSH ì„¤ì¹˜

ì¼ë‹¨ ê°€ìƒ ë¨¸ì‹  ë‚´ì— SSHë¥¼ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.

<span style="color:#dd4814"> **\[Ubuntuì˜ ê²½ìš°\]** </span>

```bash
sudo apt install openssh-server -y
sudo systemctl start ssh
sudo systemctl enable ssh
```
  
<span style="color:darkcyan"> **\[Rocky Linuxì˜ ê²½ìš°\]** </span>

```bash
sudo yum install openssh-server -y
sudo systemctl start sshd
sudo systemctl enable sshd
```
  

## â­ë°©í™”ë²½ ì„¤ì •

ë°©í™”ë²½ì—ì„œ í•´ë‹¹ í¬íŠ¸ë¥¼ ì—´ì–´ì¤˜ì•¼ í•©ë‹ˆë‹¤.  

<span style="color:#dd4814"> **\[Ubuntuì˜ ê²½ìš°\]** </span>

```bash
sudo ufw allow 22
sudo ufw reload
```

<span style="color:darkcyan"> **\[Rocky Linuxì˜ ê²½ìš°\]** </span>

```bash
sudo firewall-cmd --permanent --zone=public --add-port=22/tcp
sudo firewall-cmd --reload
sudo firewall-cmd --list-ports
```
  

ë§Œì¼ ê°€ìƒë¨¸ì‹ ì—ì„œ ì‹¤í—˜í•˜ëŠ” ìš©ë„ë¡œ ì‚¬ìš©í•  ê±°ë¼ë©´ **ì•„ì˜ˆ ë°©í™”ë²½ ìì²´ë¥¼ ë¹„í™œì„±í•˜ëŠ” ë°©ë²•ë„ ìˆìŠµë‹ˆë‹¤.**  
  
<span style="color:#dd4814"> **\[Ubuntuì˜ ê²½ìš°\]** </span>

```bash
sudo systemctl stop ufw
sudo systemctl disable ufw
```
  
<span style="color:darkcyan"> **\[Rocky Linuxì˜ ê²½ìš°\]** </span>

```bash
sudo systemctl stop firewalld
sudo systemctl disable firewalld
```


## â­í˜¸ìŠ¤íŠ¸ IP í™•ì¸
 
CMDì°½ì—ì„œ ipconfigë¡œ IP ëŒ€ì—­ì„ í™•ì¸í•©ë‹ˆë‹¤.

NAT Networkì˜ ê¸°ì¤€ì´ ë˜ëŠ” ë‚´ ì»´í“¨í„°ì˜ IP ì£¼ì†ŒëŠ” **í˜¸ìŠ¤íŠ¸ ì£¼ì†Œ**ë¼ê³  í•˜ê³ ,
Virtualbox ê°€ìƒ ë¨¸ì‹ (VM) ì•ˆì˜ IP ì£¼ì†ŒëŠ” **ê²ŒìŠ¤íŠ¸ ì£¼ì†Œ**ë¼ê³  í•©ë‹ˆë‹¤.

ë§Œì¼ í˜¸ìŠ¤íŠ¸ IPê°€ **192.168.0.2**ê³ ,
ì„œë¸Œë„· ë§ˆìŠ¤í¬ê°€ **255.255.255.0**ì´ë©´,
ê²ŒìŠ¤íŠ¸ IP 192.168.0ê¹Œì§€ëŠ” ê°™ê²Œ ì„¤ì •í•˜ê³  ê·¸ ë’¤ë¡œëŠ” ë‹¤ë¥´ê²Œ ì„¤ì •í•˜ë©´ ë©ë‹ˆë‹¤.

ì €ëŠ” ê²ŒìŠ¤íŠ¸ IPë¥¼Â **192.168.0.10**ìœ¼ë¡œ ì„¤ì •í•˜ê¸°ë¡œ í•˜ê³  ì§„í–‰í•´ë³´ê² ìŠµë‹ˆë‹¤.
  

## â­Virtualbox NAT Network ì„¤ì •

![Alt text](/../../images/2023/2023-09-21_1_virtualbox_ssh_nat_network/1.png)  

![Alt text](/../../images/2023/2023-09-21_1_virtualbox_ssh_nat_network/2.png)  

**\[General Options\]**  
ì´ë¦„ : NatNetwork  
IP : 192.168.0.0/24  
Enable DHCP  

/24ëŠ” 255.255.255.0ê³¼ ê°™ìœ¼ë©°, ì´ëŠ” 192.168.0.1~192.168.0.255ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.

ë”°ë¼ì„œ 192.168.0ê¹Œì§€ ê°™ìœ¼ë©°, Prefixì´ê¸° ë•Œë¬¸ì— ë‚˜ë¨¸ì§€ëŠ” 0ìœ¼ë¡œ ì„¤ì •í•œ ê²ë‹ˆë‹¤.

ë§Œì¼ CMDë¡œ í™•ì¸í•œ ë‚´ ì»´í“¨í„°ì˜ IP(í˜¸ìŠ¤íŠ¸ IP)ê°€ 192.168.50.2 ì˜€ë‹¤ë©´, 192.168.50.0 ìœ¼ë¡œ ì„¤ì •í•˜ë©´ ë©ë‹ˆë‹¤.

![Alt text](/../../images/2023/2023-09-21_1_virtualbox_ssh_nat_network/3.png)  
  
**\[í¬íŠ¸í¬ì›Œë”©\]**  
í˜¸ìŠ¤íŠ¸ IP : (ê³µë€)  
í˜¸ìŠ¤íŠ¸ í¬íŠ¸ : 22  
ê²ŒìŠ¤íŠ¸ IP : **192.168.0.10**  
ê²ŒìŠ¤íŠ¸ í¬íŠ¸ : 22  

ì €ëŠ” í˜¸ìŠ¤íŠ¸ í¬íŠ¸ë¥¼ 22ë¡œ ì—´ì–´ì¤¬ìŠµë‹ˆë‹¤ë§Œ 2222ë²ˆ í¬íŠ¸ê°™ì€ ë‹¤ë¥¸ í¬íŠ¸ë¡œ ì—´ì–´ë„ ë©ë‹ˆë‹¤.
  
ë‹¤ë§Œ 2222ë²ˆ í¬íŠ¸ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì—´ë ¤ìˆì§€ ì•Šì•„ì„œ ë°©í™”ë²½ ì„¤ì •ì„ í†µí•´ ì—´ì–´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.
  
Windowsì—ì„œ ë°©í™”ë²½ ì„¤ì •ì„ í†µí•´ í¬íŠ¸ë¥¼ ì—¬ëŠ” ë²•ì€ ì•„ë˜ ë¸”ë¡œê·¸ ê¸€ì„ ì°¸ê³ í•´ì£¼ì„¸ìš”.
  
[https://ansan-survivor.tistory.com/408](https://ansan-survivor.tistory.com/408)
ğŸ”¼ í¬íŠ¸ ë°©í™”ë²½ ì„¤ì •
  
## â­ê°€ìƒë¨¸ì‹  ë„¤íŠ¸ì›Œí¬ ì„¤ì •

![Alt text](/../../images/2023/2023-09-21_1_virtualbox_ssh_nat_network/4.png)  

**\[ì–´ëŒ‘í„° 1\]**  
ë„¤íŠ¸ì›Œí¬ ì–´ëŒ‘í„° ì‚¬ìš©í•˜ê¸°  
ë‹¤ìŒì— ì—°ê²°ë¨ : NAT ë„¤íŠ¸ì›Œí¬  
ì´ë¦„ : NatNetwork  
  

## â­ê²ŒìŠ¤íŠ¸ OS IP ì„¤ì •

IP : **192.168.0.10**  
SM : 255.255.255.0  
GW : 192.168.0.1  
DNS : 8.8.8.8  
  

## â­SSH ì ‘ì† (ì¼ë°˜)

ì €ëŠ” CMD ì°½ì„ í†µí•´ ì ‘ì†í–ˆì§€ë§Œ, Putty ë“±ì˜ í”„ë¡œê·¸ë¨ì„ ì‚¬ìš©í•´ë„ ìƒê´€ì—†ìŠµë‹ˆë‹¤.

```bash
# ì—¬ê¸°ì„œ ubuntuëŠ” ê°€ìƒë¨¸ì‹  ì•ˆì˜ ë¡œì»¬ í˜¸ìŠ¤íŠ¸ëª….
# ì•„ë˜ ì…‹ ì¤‘ ì ì–´ë„ í•˜ë‚˜ëŠ” ë˜ì–´ì•¼ í•¨.
ssh -p 2222 ubuntu@localhost
ssh -p 2222 ubuntu@127.0.0.1
ssh -p 2222 ubuntu@192.168.0.10  //ê²ŒìŠ¤íŠ¸ IP : 192.168.0.10 ì´ë¯€ë¡œ.
```

ì´ë¼ê³  ì…ë ¥í–ˆëŠ”ë°, -p 2222ëŠ” ì•„ê¹Œ í¬íŠ¸í¬ì›Œë”©ì—ì„œ ì§€ì •í–ˆë˜ 2222ë²ˆ í¬íŠ¸ë¡œ ì ‘ì†í•˜ê² ë‹¤ëŠ” ì´ì•¼ê¸°ê³ ,

ubuntuëŠ” ê°€ìƒë¨¸ì‹ (VM) ë‚´ ìš´ì˜ì²´ì œì˜ userëª…,

@ë’¤ì— ì˜¤ëŠ” localhostëŠ” ì£¼ì†Œë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.  
  
127.0.0.1ê³¼ ê°™ì´ ìˆ«ìë¡œ ì¨ë„ ìƒê´€ì—†ìŠµë‹ˆë‹¤.
  

## â­SSH ì ‘ì† (RSA ì‚¬ìš©)

RSAë¥¼ ì‚¬ìš©í•˜ì—¬ SSH ì ‘ì†í•˜ëŠ” ë°©ë²•ë„ ìˆìŠµë‹ˆë‹¤.  
ë¬¼ë¡  ë²„ì¶”ì–¼ë°•ìŠ¤ ë‚´ì˜ ë¦¬ëˆ…ìŠ¤ì— SSH RSA ì ‘ì†í•˜ë ¤ë©´, ìœ„ì—ì„œ ì­ˆìš± ì„¤ëª…ë“œë ¸ë˜ ê²ƒì²˜ëŸ¼ ë¨¼ì € NAT Network ê´€ë ¨ ì„¤ì •ë“¤ì„ ëª¨ë‘ ë§ˆì¹˜ì‹  ìƒíƒœì—,  
SSH ì¼ë°˜ ì—°ê²°ê¹Œì§€ ê°€ëŠ¥í•œ ìƒíƒœì—¬ì•¼ í•©ë‹ˆë‹¤.
  
RSA SSH ì ‘ì† ì‹œì—” ë‹¤ì–‘í•œ íˆ´ì„ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ”ë°, ëª‡ ê°€ì§€ë§Œ ì„¤ëª…í•´ë³´ê² ìŠµë‹ˆë‹¤.

### ğŸ’§Putty Keygenì„ ì‚¬ìš©í•˜ì—¬ SSH RSA ì ‘ì†í•˜ëŠ” ë²•

[https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html](https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html)  
ë¨¼ì € ìœ„ ë§í¬ì—ì„œ puttyë¥¼ ë‹¤ìš´ë°›ì•„ ì„¤ì¹˜í•©ë‹ˆë‹¤.

putty key generatorë¥¼ ì‹¤í–‰í•œ ë’¤, Generate ë²„íŠ¼ì„ ëˆ„ë¦…ë‹ˆë‹¤.  
ê·¸ëŸ¬ë©´ ì»¤ë‹¤ë€ ë¹ˆ ì¹¸ì´ ë‚˜íƒ€ë‚˜ëŠ”ë°, ê·¸ ìœ„ì— ëŒ€ê³  ì»¤ì„œë¥¼ ë§‰ ì›€ì§ì—¬ì¤ë‹ˆë‹¤.  
ê·¸ëŸ¬ë©´ í‚¤ ìƒì„±ì´ ì™„ë£Œë©ë‹ˆë‹¤.

authorized_keys íŒŒì¼ì— ë“¤ì–´ê°ˆ ê³µê°œí‚¤ ë‚´ìš©ì„ Ctrl+Cë¡œ ë³µì‚¬í•´ë‘ê³ ,  
Save private key ë²„íŠ¼ì„ ëˆŒëŸ¬ ê°œì¸í‚¤ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.  
(ì €ëŠ” passphraseë¥¼ ë”°ë¡œ ì…ë ¥í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì´ëŸ¬ë©´ ì•”í˜¸ ì—†ì´ SSH RSA ë¡œê·¸ì¸ì´ ê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤.)
  
ê·¸ë¦¬ê³  cmd ì°½ì„ ì—´ì–´ ë‹¤ìŒê³¼ ê°™ì´ ì…ë ¥í•´ sshì— ì ‘ì†í•©ë‹ˆë‹¤.

```bash
#ubuntu : ë¦¬ëˆ…ìŠ¤ ìœ ì €ëª…
#localhost : ì£¼ì†Œë¥¼ ì˜ë¯¸. localhostëŠ” 127.0.0.1ê³¼ ê°™ìŒ.
ssh -p 2222 ubuntu@localhost
yes
sudo su
mkdir .ssh
cd .ssh
vi authorized_keys
```

íŒŒì¼ ë‚´ìš©ìœ¼ë¡œëŠ” ì•„ê¹Œ Ctrl+Cë¡œ ë³µì‚¬í•´ë’€ë˜ ë‚´ìš©ì„ Ctrl+Shift+Vë¡œ ë¶™ì—¬ë„£ê³  ì €ì¥í•´ì¤ë‹ˆë‹¤.

ë‹¤ì‹œ puttyë¥¼ ì—´ì–´ SSHë¡œ ì ‘ì†í•©ë‹ˆë‹¤.

ì´ë ‡ê²Œ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ì—†ì´ ì ‘ì†ì— ì„±ê³µí–ˆìŠµë‹ˆë‹¤.

### ğŸ’§Git Bashë¥¼ ì‚¬ìš©í•˜ì—¬ SSH RSA ì ‘ì†í•˜ëŠ” ë²•

[https://light-tree.tistory.com/232](https://light-tree.tistory.com/232)
[https://light-tree.tistory.com/234](https://light-tree.tistory.com/234)
ìœ„ ê¸€ì„ ì°¸ê³ í•˜ì—¬ ì§„í–‰í•˜ì˜€ìŠµë‹ˆë‹¤.
  
ìœˆë„ìš°ì—ì„œ ssh-keygenì„ í•˜ê²Œ ë˜ë©´ ìœˆë„ìš°ì™€ ë¦¬ëˆ…ìŠ¤ ê°„ì˜ ì¤„ë°”ê¿ˆ ì„¤ì •ì´ ì„œë¡œ ë‹¬ë¼ì„œ(CRLF vs LF) ì ‘ì† ì—ëŸ¬ê°€ ë‚©ë‹ˆë‹¤.  
ì´ëŸ° ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” Git Bashë¥¼ ì´ìš©í•´ì£¼ëŠ” ê²ƒì´ ì¢‹ë‹¤ê³  í•˜ì—¬ Git Bashë¡œ ì§„í–‰í•˜ì˜€ìŠµë‹ˆë‹¤.

ìš°ì„  Windowsì—ì„œ Git Bashë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.  
ê¼­ ê´€ë¦¬ì ê¶Œí•œìœ¼ë¡œ ì—´ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤.  

```
ssh-keygen
ì—”í„° 3ë²ˆ
```

ì €ëŠ” ë¹„ë°€ë²ˆí˜¸ë¥¼ ì„¤ì •í•˜ì§€ ì•Šì„ ê±°ê¸° ë•Œë¬¸ì— ì—”í„°ë¥¼ 3ë²ˆ ëˆŒëŸ¬ì¤¬ìŠµë‹ˆë‹¤.

```bash
cd .ssh
scp -P 2222 id_rsa.pub ubuntu@localhost:.
yes
```

ìš°ë¶„íˆ¬ì— ì ‘ì†í•˜ë©´ í˜„ì¬ ë””ë ‰í„°ë¦¬ëŠ” í™ˆ ë””ë ‰í„°ë¦¬ì…ë‹ˆë‹¤.

```bash
#í˜¸ìŠ¤íŠ¸ì—ì„œ 2222ë²ˆì„ ì‚¬ìš©í•´ ìš°ë¶„íˆ¬ì— ì ‘ì†
ssh -p 2222 ubuntu@localhost
sudo su
cd .ssh
#no such ì–´ì©Œê³  ì €ì©Œê³  í•˜ë©´ .ssh ë””ë ‰í„°ë¦¬ ìƒì„± í›„ .ssh ì•ˆìœ¼ë¡œ ì´ë™
mkdir .ssh
cd .ssh
#ì´ë¯¸ ìˆìœ¼ë©´ .ssh ë””ë ‰í„°ë¦¬ ì•ˆìœ¼ë¡œ ì´ë™í•˜ê²Œ ë©ë‹ˆë‹¤.
```

```bash
#í™ˆ ë””ë ‰í„°ë¦¬ì— ìˆëŠ” ê³µê°œí‚¤ íŒŒì¼ì„ .ssh í´ë” ì•ˆì— ì €ì¥
cat ../id_rsa.pub >> authorized_keys
exit
exit
```

ì´ì œ ìœˆë„ìš°ì—ì„œ RSA ì ‘ì†ì„ í•´ë´…ë‹ˆë‹¤.

```bash
#ìœˆë„ìš°ì— ì €ì¥ëœ ê°œì¸í‚¤ë¡œ ë¦¬ëˆ…ìŠ¤ì— SSH RSA ì ‘ì†
ssh -i ~/.ssh/id_rsa -p 2222 ubuntu@localhost
```

ë¹„ë°€ë²ˆí˜¸ ì—†ì´ ì…ë ¥í•´ì•¼ ì„±ê³µì…ë‹ˆë‹¤.  
ë§Œì¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ìš”êµ¬í•œë‹¤ë©´ ë­”ê°€ ì˜ëª»ëœ ê²ƒì´ë‹ˆ ì•„ë˜ ë§í¬ ê¸€ì„ ì°¸ê³ í•´ì£¼ì„¸ìš”.  
[https://light-tree.tistory.com/234](https://light-tree.tistory.com/234)